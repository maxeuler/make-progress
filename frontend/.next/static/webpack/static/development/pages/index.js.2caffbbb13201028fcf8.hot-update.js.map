{"version":3,"file":"static/webpack/static/development/pages/index.js.2caffbbb13201028fcf8.hot-update.js","sources":["webpack:///./components/Task.js"],"sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport ProgressForm from './ProgressForm';\nimport ProgressBar from './ProgressBar';\nimport TaskDetails from './TaskDetails';\n\nconst TaskHeader = styled.div`\n\twidth: 90%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin: 1rem 0;\n\tp {\n\t\tcolor: ${props => props.theme.bright};\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tfont-size: 2rem;\n\t\tfont-weight: 300;\n\t}\n\t#title {\n\t\tfont-size: 3rem;\n\t\tfont-weight: 400;\n\t}\n`;\n\nconst Progress = styled.div`\n\tdisplay: flex;\n\theight: 50px;\n\tjustify-content: space-between;\n\talign-items: center;\n`;\n\nconst AddButton = styled.button`\n\twidth: 40px;\n\theight: 40px;\n\tmargin-right: 4rem;\n\tbackground: none;\n\tborder: 1px solid ${props => props.theme.bright};\n\tborder-radius: 20px;\n\tcolor: ${props => props.theme.bright};\n\tfont-size: 2rem;\n\tcursor: pointer;\n`;\n\nconst StyledTask = styled.div`\n\tmargin: 2rem 0;\n`;\n\nconst DetailsButton = styled.button`\n\tbackground: none;\n\tborder: 1px solid ${props => props.theme.bright};\n\tborder-radius: 3px;\n\tcolor: ${props => props.theme.bright};\n\tmargin-left: 2rem;\n\tfont-size: 1.5rem;\n\tcursor: pointer;\n`;\n\nconst DeleteButton = styled.button`\n\tbackground: none;\n\tborder: none;\n\tfont-size: 3rem;\n\tcolor: ${props => props.theme.bright};\n`;\n\nclass Task extends Component {\n\tstate = {\n\t\tshowForm: false,\n\t\tshowDetails: false,\n\t\tsegments: this.props.task.segments\n\t};\n\n\ttoggleForm = () => {\n\t\tthis.setState(prevState => ({\n\t\t\tshowForm: !prevState.showForm\n\t\t}));\n\t};\n\n\taddProgress = async (units, description) => {\n\t\tconst { task } = this.props;\n\t\tif (task.finishedUnits + units > task.units) {\n\t\t\tunits = task.units - task.finishedUnits;\n\t\t}\n\t\tthis.props.task.finishedUnits = task.finishedUnits + units;\n\t\tthis.toggleForm();\n\n\t\tconst taskPromise = axios.post('http://localhost:8888/api/addSegments', {\n\t\t\tfinishedUnits: units,\n\t\t\ttask: this.props.task._id\n\t\t});\n\t\tconst segmentPromise = axios.post(\n\t\t\t'http://localhost:8888/api/createSegment',\n\t\t\t{\n\t\t\t\tunits,\n\t\t\t\tdescription,\n\t\t\t\ttask: task._id\n\t\t\t}\n\t\t);\n\t\tconst [taskRes, segmentRes] = await Promise.all([\n\t\t\ttaskPromise,\n\t\t\tsegmentPromise\n\t\t]);\n\t\tconst updatedSegments = [\n\t\t\t...this.state.segments,\n\t\t\tObject.assign({}, segmentRes.data)\n\t\t];\n\t\tthis.setState({\n\t\t\tsegments: updatedSegments\n\t\t});\n\t\t// TODO handle errors\n\t};\n\n\ttoggleDetails = e => {\n\t\tthis.setState(prevState => ({ showDetails: !prevState.showDetails }));\n\t};\n\n\trender() {\n\t\tconst { task } = this.props;\n\t\treturn (\n\t\t\t<StyledTask>\n\t\t\t\t<TaskHeader>\n\t\t\t\t\t<span style={{ display: 'flex' }}>\n\t\t\t\t\t\t<p id=\"title\">{task.title}</p>\n\t\t\t\t\t\t<DetailsButton onClick={this.toggleDetails}>\n\t\t\t\t\t\t\t{this.state.showDetails ? 'Hide Details' : 'Show Details'}\n\t\t\t\t\t\t</DetailsButton>\n\t\t\t\t\t\t<DeleteButton className=\"delete\">&times;</DeleteButton>\n\t\t\t\t\t</span>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{task.finishedUnits} von {task.units} {task.unit}\n\t\t\t\t\t</p>\n\t\t\t\t</TaskHeader>\n\t\t\t\t<Progress>\n\t\t\t\t\t<ProgressBar finishedUnits={task.finishedUnits} units={task.units} />\n\t\t\t\t\t{task.finishedUnits !== task.units && (\n\t\t\t\t\t\t<AddButton name=\"addButton\" onClick={this.toggleForm}>\n\t\t\t\t\t\t\t+\n\t\t\t\t\t\t</AddButton>\n\t\t\t\t\t)}\n\t\t\t\t</Progress>\n\t\t\t\t{this.state.showForm && (\n\t\t\t\t\t<ProgressForm addProgress={this.addProgress} task={task} />\n\t\t\t\t)}\n\t\t\t\t{this.state.showDetails &&\n\t\t\t\t\t(this.state.segments.length ? (\n\t\t\t\t\t\t<TaskDetails segments={this.state.segments} unit={task.unit} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<TaskHeader>\n\t\t\t\t\t\t\t<p id=\"title\">You have to do something first üèåüèº‚Äç</p>\n\t\t\t\t\t\t</TaskHeader>\n\t\t\t\t\t))}\n\t\t\t</StyledTask>\n\t\t);\n\t}\n}\n\nexport default Task;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAOA;AAAA;AAYA;AAOA;AAKA;AAAA;AAEA;AAAA;AAKA;AAIA;AAEA;AAAA;AAEA;AAAA;AAMA;AAIA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAGA;AACA;AACA;AAHA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAoBA;AAAA;AAIA;AACA;AAGA;AACA;AADA;AACA;AACA;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAiCA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAxFA;AACA;AA0FA;;;;A","sourceRoot":""}